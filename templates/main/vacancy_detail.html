{% extends 'base.html' %}
{% load static %}

{% block content %}
<!-- Hero Section -->
<section class="bg-dark-blue text-white py-8">
    <div class="container mx-auto px-6">
        <div class="max-w-4xl mx-auto">
            <!-- Back Button -->
            <a href="{% url 'vacancies_list' %}" 
               class="inline-flex items-center text-gold hover:text-amber-200 mb-6 transition-colors duration-200"
               aria-label="–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Å–ø–∏—Å–∫—É –≤–∞–∫–∞–Ω—Å–∏–π">
                <svg class="w-4 h-4 mr-2" 
                     fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"/>
                </svg>
                –ù–∞–∑–∞–¥ –∫ –≤–∞–∫–∞–Ω—Å–∏—è–º
            </a>

            <!-- Header with Logo and Vacancy Info -->
            <div class="flex flex-col md:flex-row gap-6 items-start">
    <!-- Logo -->
    <div class="flex-shrink-0">
        <a href="{% url 'home' %}" class="flex items-center gap-3 group" aria-label="–ù–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É">
            <img src="{% static 'images/logo.jpeg' %}" alt="–ö–æ–º–ø–∞–Ω–∏—è –ê—Ä–≥—É—Å" 
                 class="h-20 w-auto rounded-lg">
        </a>
    </div>
    
    <!-- Vacancy Info -->
    <div class="flex-1">
        <h1 class="text-2xl font-bold mb-2">{{ vacancy.title }}</h1>
        
        <!-- Salary - Large and prominent -->
        {% if vacancy.salary %}
        <div class="mb-4">
            <span class="text-3xl font-bold text-gold">
                {{ vacancy.salary }}
            </span>
        </div>
        {% endif %}
        
        <!-- Experience and Employment Type Badges -->
        <div class="flex flex-wrap gap-2 mb-4">
            {% if vacancy.is_active %}
            <span class="bg-gold text-dark-blue px-3 py-1 rounded-full text-sm font-medium">
                üî• –ê–∫—Ç–∏–≤–Ω–∞—è –≤–∞–∫–∞–Ω—Å–∏—è
            </span>
            {% endif %}
            
            {% if vacancy.experience and vacancy.experience != "–Ω–µ —É–∫–∞–∑–∞–Ω" %}
            <span class="bg-white/20 text-white px-3 py-1 rounded-full text-sm font-medium">
                üéØ {{ vacancy.experience }}
            </span>
            {% endif %}
            
            {% if vacancy.employment_type and vacancy.employment_type != "–Ω–µ —É–∫–∞–∑–∞–Ω" %}
            <span class="bg-white/20 text-white px-3 py-1 rounded-full text-sm font-medium">
                üíº {{ vacancy.employment_type }}
            </span>
            {% endif %}
        </div>
    </div>
</div>
</section>

<!-- Content Section -->
<section class="py-8 bg-light-gray">
    <div class="container mx-auto px-6">
        <div class="max-w-4xl mx-auto">
            <!-- Main Content Grid -->
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                
                <!-- Left Column - Response Button and Company Info -->
                <div class="lg:col-span-1 space-y-6">
                    <!-- Response Button -->
                    <div class="bg-white rounded-lg border border-gray-200 p-4 text-center">
                        <button id="show-form-btn" 
                                class="w-full bg-gold hover:bg-amber-600 text-white font-semibold py-2 px-6 rounded-lg transition-colors duration-200 text-base mb-2"
                                aria-expanded="false"
                                aria-controls="response-form">
                            –û—Ç–∫–ª–∏–∫–Ω—É—Ç—å—Å—è
                        </button>
                        <p class="text-gray-600 text-sm">–ù–∞–∂–º–∏—Ç–µ —á—Ç–æ–±—ã –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É</p>
                    </div>

                    <!-- Vacancy Details Card - Fixed width -->
                    <div class="bg-white rounded-lg border border-gray-200 p-6 w-full">
    <h3 class="font-bold text-dark-blue mb-6 text-lg">–î–µ—Ç–∞–ª–∏ –æ –≤–∞–∫–∞–Ω—Å–∏–∏</h3>
    <div class="space-y-4 text-base">
        <!-- Salary -->
        <div>
            <div class="flex items-center gap-2 mb-1">
                <span class="text-gray-600">üí∞</span>
                <span class="text-gray-600">–ó–∞—Ä–ø–ª–∞—Ç–∞</span>
            </div>
            <div>
                <span class="font-semibold text-dark-blue text-lg">
                    {{ vacancy.salary|default:"–Ω–µ —É–∫–∞–∑–∞–Ω–∞" }}
                </span>
            </div>
        </div>
        
        <!-- Experience -->
        <div>
            <div class="flex items-center gap-2 mb-1">
                <span class="text-gray-600">üéØ</span>
                <span class="text-gray-600">–û–ø—ã—Ç —Ä–∞–±–æ—Ç—ã</span>
            </div>
            <div>
                <span class="font-semibold text-dark-blue">
                    {{ vacancy.experience|default:"–Ω–µ —É–∫–∞–∑–∞–Ω" }}
                </span>
            </div>
        </div>
        
        <!-- Employment Type -->
        <div>
            <div class="flex items-center gap-2 mb-1">
                <span class="text-gray-600">üíº</span>
                <span class="text-gray-600">–¢–∏–ø –∑–∞–Ω—è—Ç–æ—Å—Ç–∏</span>
            </div>
            <div>
                <span class="font-semibold text-dark-blue">
                    {{ vacancy.employment_type|default:"–Ω–µ —É–∫–∞–∑–∞–Ω" }}
                </span>
            </div>
        </div>
        
        <!-- Publication Date -->
        <div class="pt-3 border-t border-gray-100">
            <div class="flex items-center gap-2 mb-1">
                <span class="text-gray-600">üìÖ</span>
                <span class="text-gray-600">–û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–∞</span>
            </div>
            <div>
                <span class="font-semibold text-dark-blue">{{ vacancy.created_at|date:"d.m.Y" }}</span>
            </div>
        </div>
    </div>
</div>
                    <!-- Company Info -->
                    <div class="bg-white rounded-lg border border-gray-200 p-6">
                        <h3 class="font-bold text-dark-blue mb-4 text-lg">–û –∫–æ–º–ø–∞–Ω–∏–∏</h3>
                        <div class="text-gray-700 text-base space-y-4">
                            <p><strong>–ö–æ–º–ø–∞–Ω–∏—è –ê—Ä–≥—É—Å</strong> –Ω–∞—á–∞–ª–∞ —Å–≤–æ—é –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤ 2004 –≥–æ–¥—É –∫–∞–∫ –Ω–µ–±–æ–ª—å—à–∞—è –∫–æ–º–∞–Ω–¥–∞ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤ –≤ –æ–±–ª–∞—Å—Ç–∏ –ø–æ–∂–∞—Ä–Ω–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.</p>
                            <p>–ó–∞ –±–æ–ª–µ–µ —á–µ–º 20 –ª–µ—Ç —Ä–∞–±–æ—Ç—ã –º—ã –≤—ã—Ä–æ—Å–ª–∏ –≤ –∫—Ä—É–ø–Ω—É—é –∫–æ–º–ø–∞–Ω–∏—é, —Ä–µ–∞–ª–∏–∑–æ–≤–∞–≤ —Å–æ—Ç–Ω–∏ –ø—Ä–æ–µ–∫—Ç–æ–≤ —Ä–∞–∑–ª–∏—á–Ω–æ–π —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ - –æ—Ç –Ω–µ–±–æ–ª—å—à–∏—Ö –æ—Ñ–∏—Å–Ω—ã—Ö –ø–æ–º–µ—â–µ–Ω–∏–π –¥–æ –∫—Ä—É–ø–Ω—ã—Ö —Ç–æ—Ä–≥–æ–≤—ã—Ö —Ü–µ–Ω—Ç—Ä–æ–≤ –∏ –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤.</p>
                            <p class="text-gold font-medium">–ú—ã —Ü–µ–Ω–∏–º –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ä–æ—Å—Ç –Ω–∞—à–∏—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –∏ —Å–æ–∑–¥–∞–µ–º –∫–æ–º—Ñ–æ—Ä—Ç–Ω—ã–µ —É—Å–ª–æ–≤–∏—è –¥–ª—è —Ä–∞–±–æ—Ç—ã.</p>
                        </div>
                    </div>
                </div>

                <!-- Right Column - Vacancy Details -->
                <div class="lg:col-span-2">
                    <!-- Response Form -->
                    <div id="response-form" 
                         class="hidden bg-white rounded-lg border border-gray-200 mb-6"
                         role="dialog"
                         aria-labelledby="form-title"
                         aria-hidden="true">
                        
                        <!-- Form Header -->
                        <div class="bg-gold text-white p-6 rounded-t-lg">
                            <h3 id="form-title" class="text-xl font-bold mb-2">–û—Ç–∫–ª–∏–∫–Ω—É—Ç—å—Å—è –Ω–∞ –≤–∞–∫–∞–Ω—Å–∏—é</h3>
                            <p class="text-amber-100 text-base">–ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É –∏ –º—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏</p>
                        </div>
                        
                        <!-- Form Body -->
                        <div class="p-6">
                            {% if messages %}
                                {% for message in messages %}
                                    <div class="bg-green-50 border border-green-200 text-green-700 p-4 rounded-lg mb-4 text-base" role="alert">
                                        <div class="flex items-center">
                                            <svg class="w-5 h-5 mr-2 text-green-500 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                                            </svg>
                                            <div>
                                                <p class="font-semibold">–£—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ!</p>
                                                <p class="text-green-600 mt-1">{{ message }}</p>
                                            </div>
                                        </div>
                                    </div>
                                {% endfor %}
                            {% endif %}
                            
                            <form method="post" class="space-y-4" aria-labelledby="form-title">
                                {% csrf_token %}
                                
                                <div class="space-y-2">
                                    <label for="name-input" class="block text-dark-blue text-base font-semibold">
                                        –í–∞—à–µ –∏–º—è *
                                    </label>
                                    <input type="text" 
                                           id="name-input"
                                           name="{{ form.name.name }}" 
                                           value="{{ form.name.value|default:'' }}"
                                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-1 focus:ring-gold focus:border-gold transition-colors duration-200 bg-white text-base"
                                           placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è"
                                           required
                                           aria-required="true">
                                    {% if form.name.errors %}
                                        <div class="text-red-500 text-sm mt-1" role="alert">
                                            {{ form.name.errors }}
                                        </div>
                                    {% endif %}
                                </div>
                                
                                <div class="space-y-2">
                                    <label for="phone-input" class="block text-dark-blue text-base font-semibold">
                                        –¢–µ–ª–µ—Ñ–æ–Ω *
                                    </label>
                                    <input type="tel" 
                                           id="phone-input"
                                           name="{{ form.phone_number.name }}" 
                                           value="{{ form.phone_number.value|default:'' }}"
                                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-1 focus:ring-gold focus:border-gold transition-colors duration-200 bg-white text-base"
                                           placeholder="+7 (999) 999-99-99"
                                           required
                                           aria-required="true">
                                    {% if form.phone_number.errors %}
                                        <div class="text-red-500 text-sm mt-1" role="alert">
                                            {{ form.phone_number.errors }}
                                        </div>
                                    {% endif %}
                                </div>
                                
                                <div class="space-y-2">
                                    <label for="comment-input" class="block text-dark-blue text-base font-semibold">
                                        –í–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
                                    </label>
                                    <textarea id="comment-input"
                                              name="{{ form.comment.name }}" 
                                              class="w-full px-3 py-3 border border-gray-300 rounded-lg focus:ring-1 focus:ring-gold focus:border-gold transition-colors duration-200 bg-white text-base resize-none"
                                              placeholder="–†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –æ —Å–≤–æ—ë–º –æ–ø—ã—Ç–µ..."
                                              rows="4"
                                              aria-describedby="comment-hint">{{ form.comment.value|default:'' }}</textarea>
                                    <p id="comment-hint" class="text-gray-500 text-sm mt-1">
                                        –ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ
                                    </p>
                                    {% if form.comment.errors %}
                                        <div class="text-red-500 text-sm mt-1" role="alert">{{ form.comment.errors }}</div>
                                    {% endif %}
                                </div>

                                <!-- ‚úÖ –ë–õ–û–ö –°–û–ì–õ–ê–°–ò–Ø –ù–ê –û–ë–†–ê–ë–û–¢–ö–£ –ü–ï–†–°–û–ù–ê–õ–¨–ù–´–• –î–ê–ù–ù–´–• -->
                                <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4">
                                    <div class="flex items-start space-x-3">
                                        <input type="checkbox" id="pd_agreed" name="pd_agreed" required
                                               class="mt-1 rounded border-gray-300 text-gold focus:ring-gold"
                                               {% if form.pd_agreed.value %}checked{% endif %}>
                                        <div>
                                            <label for="pd_agreed" class="block text-dark-blue font-medium mb-1">
                                                –°–æ–≥–ª–∞—Å–∏–µ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö <span class="text-red-500">*</span>
                                            </label>
                                            <p class="text-sm text-gray-600">
                                                –Ø –¥–∞—é —Å–æ–≥–ª–∞—Å–∏–µ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –º–æ–∏—Ö –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å 
                                                <a href="{% url 'privacy_policy' %}" target="_blank" class="text-gold hover:text-amber-600 underline">
                                                    –ü–æ–ª–∏—Ç–∏–∫–æ–π –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏
                                                </a> 
                                                –∏ –ø—Ä–∏–Ω–∏–º–∞—é 
                                                <a href="{% url 'terms' %}" target="_blank" class="text-gold hover:text-amber-600 underline">
                                                    –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ
                                                </a>.
                                                –°–æ–≥–ª–∞—Å–∏–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç–æ–∑–≤–∞–Ω–æ –º–Ω–æ–π –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç –ø—É—Ç–µ–º –ø–∏—Å—å–º–µ–Ω–Ω–æ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è.
                                            </p>
                                        </div>
                                    </div>
                                    {% if form.pd_agreed.errors %}
                                        <div class="text-red-500 text-sm mt-2" role="alert">
                                            {{ form.pd_agreed.errors }}
                                        </div>
                                    {% endif %}
                                </div>
                                
                                <div class="flex gap-3 pt-2">
                                    <button type="submit" 
                                            class="flex-1 bg-gold hover:bg-amber-600 text-white font-semibold py-3 px-6 rounded-lg transition-colors duration-200 text-base">
                                        –û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç–∫–ª–∏–∫
                                    </button>
                                    <button type="button" 
                                            id="hide-form-btn"
                                            class="px-6 py-3 border border-gray-300 text-gray-700 hover:border-gray-400 hover:bg-gray-50 rounded-lg transition-colors duration-200 font-medium text-base">
                                        –û—Ç–º–µ–Ω–∞
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>

                    <!-- Vacancy Description and Benefits Container -->
                    <div class="space-y-6">
                        <!-- Detailed Vacancy Information -->
                        <div class="bg-white rounded-lg border border-gray-200 p-6">
                            <h2 class="text-xl font-bold text-dark-blue mb-6">–ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –≤–∞–∫–∞–Ω—Å–∏–∏</h2>
                            
                            <div class="space-y-6">
                                {% if vacancy.responsibilities %}
                                <div>
                                    <h3 class="text-lg font-semibold text-dark-blue mb-3 flex items-center gap-2">
                                        <span class="w-2 h-2 bg-gold rounded-full"></span>
                                        –û–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏
                                    </h3>
                                    <div class="text-gray-700 text-base leading-relaxed">
                                        {{ vacancy.responsibilities|linebreaks }}
                                    </div>
                                </div>
                                {% endif %}
                                
                                {% if vacancy.requirements %}
                                <div>
                                    <h3 class="text-lg font-semibold text-dark-blue mb-3 flex items-center gap-2">
                                        <span class="w-2 h-2 bg-gold rounded-full"></span>
                                        –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
                                    </h3>
                                    <div class="text-gray-700 text-base leading-relaxed">
                                        {{ vacancy.requirements|linebreaks }}
                                    </div>
                                </div>
                                {% endif %}
                                
                                {% if vacancy.conditions %}
                                <div>
                                    <h3 class="text-lg font-semibold text-dark-blue mb-3 flex items-center gap-2">
                                        <span class="w-2 h-2 bg-gold rounded-full"></span>
                                        –£—Å–ª–æ–≤–∏—è
                                    </h3>
                                    <div class="text-gray-700 text-base leading-relaxed">
                                        {{ vacancy.conditions|linebreaks }}
                                    </div>
                                </div>
                                {% endif %}
                                
                                <!-- Fallback to description if no separate fields -->
                                {% if not vacancy.responsibilities and not vacancy.requirements and not vacancy.conditions %}
                                <div class="text-gray-700 text-base leading-relaxed">
                                    {{ vacancy.description|linebreaks }}
                                </div>
                                {% endif %}
                            </div>
                        </div>

                        <!-- Benefits Section -->
                        <div class="bg-white rounded-lg border border-gray-200 p-6">
                            <h2 class="text-xl font-bold text-dark-blue mb-4">–ú—ã –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º</h2>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div class="flex items-center gap-3 p-3 bg-white border border-gold/20 rounded-lg">
                                    <div class="w-10 h-10 bg-gold/10 rounded-full flex items-center justify-center flex-shrink-0">
                                        <span class="text-gold text-base">üí∞</span>
                                    </div>
                                    <span class="text-dark-blue text-base font-medium">–ö–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–∞—è –∑–∞—Ä–ø–ª–∞—Ç–∞</span>
                                </div>
                                <div class="flex items-center gap-3 p-3 bg-white border border-gold/20 rounded-lg">
                                    <div class="w-10 h-10 bg-gold/10 rounded-full flex items-center justify-center flex-shrink-0">
                                        <span class="text-gold text-base">üìö</span>
                                    </div>
                                    <span class="text-dark-blue text-base font-medium">–û–±—É—á–µ–Ω–∏–µ –∏ —Ä–∞–∑–≤–∏—Ç–∏–µ</span>
                                </div>
                                <div class="flex items-center gap-3 p-3 bg-white border border-gold/20 rounded-lg">
                                    <div class="w-10 h-10 bg-gold/10 rounded-full flex items-center justify-center flex-shrink-0">
                                        <span class="text-gold text-base">üéØ</span>
                                    </div>
                                    <span class="text-dark-blue text-base font-medium">–°—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞</span>
                                </div>
                                <div class="flex items-center gap-3 p-3 bg-white border border-gold/20 rounded-lg">
                                    <div class="w-10 h-10 bg-gold/10 rounded-full flex items-center justify-center flex-shrink-0">
                                        <span class="text-gold text-base">üè•</span>
                                    </div>
                                    <span class="text-dark-blue text-base font-medium">–ú–µ–¥—Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏–µ</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const showFormBtn = document.getElementById('show-form-btn');
    const hideFormBtn = document.getElementById('hide-form-btn');
    const responseForm = document.getElementById('response-form');
    
    const hasSuccessMessages = document.querySelector('.bg-green-50') !== null;
    
    function showForm() {
        if (!responseForm) return;
        
        responseForm.classList.remove('hidden');
        responseForm.setAttribute('aria-hidden', 'false');
        
        if (showFormBtn) {
            showFormBtn.classList.add('hidden');
            showFormBtn.setAttribute('aria-expanded', 'true');
        }
        
        responseForm.scrollIntoView({ 
            behavior: 'smooth', 
            block: 'start' 
        });
    }
    
    function hideForm() {
        if (!responseForm) return;
        
        responseForm.classList.add('hidden');
        responseForm.setAttribute('aria-hidden', 'true');
        
        if (showFormBtn) {
            showFormBtn.classList.remove('hidden');
            showFormBtn.setAttribute('aria-expanded', 'false');
        }
    }
    
    if (hasSuccessMessages) {
        showForm();
    }
    
    if (showFormBtn) {
        showFormBtn.addEventListener('click', showForm);
    }
    
    if (hideFormBtn) {
        hideFormBtn.addEventListener('click', hideForm);
    }
    
    document.addEventListener('keydown', function(event) {
        if (event.key === 'Escape' && !responseForm.classList.contains('hidden')) {
            hideForm();
        }
    });

    // –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º—ã –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π
    const form = responseForm ? responseForm.querySelector('form') : null;
    if (form) {
        form.addEventListener('submit', function(e) {
            const pdAgreed = document.getElementById('pd_agreed');
            if (pdAgreed && !pdAgreed.checked) {
                e.preventDefault();
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –¥–∞–π—Ç–µ —Å–æ–≥–ª–∞—Å–∏–µ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö');
                pdAgreed.focus();
            }
        });
    }
});
</script>
{% endblock %}